[{"title":"GitLab问题解决文档","date":"2017-01-17T07:39:44.000Z","path":"2017/01/17/GitLab部署指南/","text":"&copy;李晓阳 一、 gitlab安装01. 环境安装Install and configure the necessary dependencies 12345678sudo yum install curl policycoreutils openssh-server openssh-clientssudo systemctl enable sshdsudo systemctl start sshdsudo yum install postfixsudo systemctl enable postfixsudo systemctl start postfixsudo firewall-cmd --permanent --add-service=httpsudo systemctl reload firewalld 02. yum安装Add the GitLab package server and install the package 12curl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bashsudo yum install gitlab-ce 03. gitlab配置启动Configure and start GitLab 1sudo gitlab-ctl reconfigure 二、80端口冲突问题 一般服务器80端口是不不对外开放的，或者只有部分端口对外开发，这时候在使用gitlab安装后就会出现无法访问的问题，这是因为可能80已经被占用这时需要修改gitlab和nginx的端口，直接上教程 修改两部分 一部分是gitlab总的控制文件，一部分是nginx监听端口的修改。 01. unicorn.rb修改配置文件在 /var/opt/gitlab/gitlab-rails/etc/unicorn.rb。 这个文件用于gitlab监听的地址和端口 1vi /var/opt/gitlab/gitlab-rails/etc/unicorn.rb 这里将初始被占用的8080端口修改为8082端口 02.修改gitlab-rails 的 gitlab.yml修改这个文件能够是gitlab内部clong地址加上我们修改的端口号82（默认为80） 1vi /opt/gitlab/embedded/service/gitlab-rails/config/gitlab.yml 03. 修改gitlab nginx将nginx监听端口由80设置为82 1vi /var/opt/gitlab/nginx/conf/gitlab-http.conf 三、 错误：GitLab: Failed to authorize your Git request: inte 由于80端口被占用在修改改端口为82之后出现用户无法提交数据问题，自己提交的代码，系统竟然提示无权限进行访问内部api我也很无语啊！还好在外文网站stackworkflow上给出提示，实测完美解决，废话少说上文。 出现这个错误是gitlab-shell配置信息错误引起的 a. 打开目录1**vi /var/opt/gitlab/gitlab-shell/config.yml** b. 修改配置文件将默认的80端口修改为82即可 以上修改只够对gitlab服务进行重启 1gitlab-ctl restart 注意这里不要使用gitlab-ctl reconfigure 会造成修改全部被重置","tags":[]}]